---
- name: "Install basic packages (Ubuntu)"
  apt:
    name:
      - unzip
      - tar
      - curl
      - btrfs-tools
      - libseccomp2
      - socat
      - util-linux
      - apt-transport-https
      - ca-certificates
      - software-properties-common
      - linux-headers-{{ ansible_kernel }}
      - ntp
    state: latest
  when: ansible_os_family == 'Debian'

- systemd: name=ntp state=restarted enabled=yes
  when: ansible_os_family == 'Debian'

# ---------------------------------------------

- name: "Install basic packages (CentOS)"
  yum:
    name:
      - unzip
      - tar
      - curl
      - btrfs-progs
      - libseccomp
      - socat
      - util-linux
      - libselinux-python
      - epel-release
      - e2fsprogs
      - yum-utils
      - yum-plugin-versionlock
      - ca-certificates
      - device-mapper-persistent-data
      - lvm2
      - ntp
    state: latest
  when: ansible_os_family == 'RedHat'

- systemd: name=ntpd state=restarted enabled=yes
  when: ansible_os_family == 'RedHat'

# ---------------------------------------------

- name: Set NTP
  command: timedatectl set-ntp true
  ignore_errors: true
